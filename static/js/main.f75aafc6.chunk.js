(this["webpackJsonpweeko-meter"]=this["webpackJsonpweeko-meter"]||[]).push([[0],{119:function(e,r,t){e.exports={quarter:"QuarterSection_quarter__1LJDD"}},120:function(e,r,t){e.exports={cube:"QuarterCube_cube__26OCD"}},126:function(e,r,t){e.exports={setupFormWrapper:"SetUp_setupFormWrapper__2uNAI"}},131:function(e,r,t){},133:function(e,r,t){},22:function(e,r,t){e.exports={centerDiv:"Login_centerDiv__3UFTf",loginWrapper:"Login_loginWrapper__UVlmr",descWrapper:"Login_descWrapper__3uq3K",descTitle:"Login_descTitle__2LcUb",descContent:"Login_descContent__3Jg4D",login:"Login_login__f0uP3",loginTitle:"Login_loginTitle__LEyc1",loginToSignup:"Login_loginToSignup__11wCM"}},239:function(e,r,t){"use strict";t.r(r);var n,a,o=t(0),c=t.n(o),s=t(25),i=t.n(s),l=(t(131),t(132),t.p,t(133),t(10)),u=t(17),d=t(56),j=t(95),b=t(15),p=t(8),h=Object(o.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),g=t(1),O=function(){var e=Object(o.useContext)(h);return Object(g.jsxs)(d.a,{bg:"light",expand:"lg",children:[Object(g.jsx)(d.a.Brand,{children:"Week Journal"}),Object(g.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsxs)(d.a.Collapse,{id:"basic-navbar-nav",children:[Object(g.jsx)(j.a,{className:"mr-auto",children:e.isLoggedIn&&Object(g.jsx)(j.a.Link,{as:u.b,to:"/",children:"Home"})}),!e.isLoggedIn&&Object(g.jsx)(u.b,{to:"/login",children:Object(g.jsx)(b.a,{variant:"outline-success",children:"Login"})}),e.isLoggedIn&&Object(g.jsx)(b.a,{variant:"outline-dark",onClick:function(){e.logout()},children:"Sign Out"})]})]})},m=t(9),x=t.n(m),f=t(13),v={},y=function(e,r){for(var t=0,n=3*r-1,o=a.getFullYear();a.getMonth()<=n&&a.getFullYear()===o;){var c=k(a);v.years[e].quarters[r-1].weeks.push({yearNum:e,quarter:r,weekNum:t,startDate:a,endDate:c,color:"#ccc",jid:0}),t++,a=c}},k=function(e){var r=new Date(e);return r.setDate(r.getDate()+7),r},C=function(e,r){r.setDate(r.getDate()-r.getDay()),v={startDate:r,years:[]};var t=r.getFullYear();a=new Date(r);for(var n=0;n<e;n++){v.years.push({yearNum:n,jid:0,currentYear:t+n,color:"#e9ecef",quarters:[]});for(var o=1;o<5;o++)v.years[n].quarters.push({yearNum:n,quarter:o,jid:0,color:"#aaa",weeks:[]}),y(n,o)}return console.log(v),v},w=function(e,r,t){return r.weekJournal.length>0&&r.weekJournal.map((function(r){var n=r.jid,a=r.yearNum,o=r.quarter,c=r.weekNum,s=r.color;console.log("add journal to created function week",r),e.years[a].quarters[o-1].weeks[c].jid=n,e.years[a].quarters[o-1].weeks[c].color=s>=0?t.weekColor[s]:s})),r.quarterJournal.length>0&&r.quarterJournal.map((function(r){var n=r.jid,a=r.yearNum,o=r.quarter,c=r.color;console.log("add journal to created function quarter",r),e.years[a].quarters[o-1].jid=n;var s=Number(c);e.years[a].quarters[o-1].color=s?t.quarterColor[s]:c})),r.yearJournal.length>0&&r.yearJournal.map((function(r){var n=r.jid,a=r.yearNum,o=r.color;console.log("add journal to created function year",r),e.years[a].jid=n,e.years[a].color=o>=0?t.yearColor[o]:o})),e},S=t(77),N=t.n(S),_=t(32),q={1:"First Quarter",2:"Second Quarter",3:"Third Quarter",4:"Fourth Quarter"},T=function(e){var r=e.info.jid;return Object(g.jsxs)(_.a,{show:e.showModal,onHide:e.onHandleClose,backdrop:"static",keyboard:!1,children:[Object(g.jsxs)(_.a.Header,{closeButton:!0,children:["week"===e.mode&&Object(g.jsxs)("div",{children:[Object(g.jsx)(_.a.Title,{children:"Week Information"}),Object(g.jsxs)("p",{children:[e.info.startDate.toDateString()," - ",e.info.endDate.toDateString()]})]}),"quarter"===e.mode&&Object(g.jsxs)("div",{children:[Object(g.jsx)(_.a.Title,{children:"Quarter Information"}),Object(g.jsx)("p",{children:q[e.quarter]})]}),"year"===e.mode&&Object(g.jsxs)("div",{children:[Object(g.jsx)(_.a.Title,{children:"Year Information"}),Object(g.jsx)("p",{children:e.info.currentYear})]})]}),Object(g.jsxs)(_.a.Body,{children:[!e.journal&&Object(g.jsx)("div",{style:{color:"#999"},children:"Does not have a journal ... yet :)"}),"week"===e.mode&&e.journal&&Object(g.jsx)("div",{children:e.journal}),"quarter"===e.mode&&e.journal&&Object(g.jsx)("div",{children:e.journal}),"year"===e.mode&&e.journal&&Object(g.jsx)("div",{children:e.journal})]}),Object(g.jsxs)(_.a.Footer,{children:["week"===e.mode&&Object(g.jsx)(u.b,{to:"/add-journal/".concat(e.info.yearNum,"/").concat(e.info.quarter,"/").concat(e.info.weekNum,"/").concat(r,"/week"),children:Object(g.jsx)(b.a,{onClick:e.onHandleClose,children:e.journal?"Edit Journal":"Add A Journal"})}),"quarter"===e.mode&&Object(g.jsx)(u.b,{to:"/add-journal/".concat(e.info.yearNum,"/").concat(e.info.quarter,"/-1/").concat(r,"/quarter"),children:Object(g.jsx)(b.a,{onClick:e.onHandleClose,children:e.journal?"Edit Journal":"Add A Journal"})}),"year"===e.mode&&Object(g.jsx)(u.b,{to:"/add-journal/".concat(e.info.yearNum,"/-1/-1/").concat(r,"/year"),children:Object(g.jsx)(b.a,{onClick:e.onHandleClose,children:e.journal?"Edit Journal":"Add A Journal"})})]})]})},B=function(){var e=Object(o.useState)(!1),r=Object(p.a)(e,2),t=r[0],n=r[1],a=Object(o.useState)(),c=Object(p.a)(a,2),s=c[0],i=c[1],l=Object(o.useRef)([]),u=Object(o.useCallback)(function(){var e=Object(f.a)(x.a.mark((function e(r){var t,a,o,c,s,u,d,j=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.length>1&&void 0!==j[1]?j[1]:"GET",a=j.length>2&&void 0!==j[2]?j[2]:null,o=j.length>3&&void 0!==j[3]?j[3]:{},n(!0),c=new AbortController,l.current.push(c),s="https://weeko-meter.herokuapp.com/api/"+r,e.prev=7,e.next=10,fetch(s,{method:t,body:a,headers:o,signal:c.signal});case 10:return u=e.sent,e.next=13,u.json();case 13:if(d=e.sent,l.current=l.current.filter((function(e){return e!==c})),n(!1),u.ok){e.next=18;break}throw new Error(d.message);case 18:return e.abrupt("return",d);case 21:throw e.prev=21,e.t0=e.catch(7),i(e.t0.message),n(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[7,21]])})));return function(r){return e.apply(this,arguments)}}(),[]);return Object(o.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:t,error:s,sendRequest:u,clearError:function(){i(null)}}},E=function(e){var r=e.weekInfo,t=r.startDate,n=r.endDate,a=r.color,c=r.jid,s=B(),i=(s.isLoading,s.error,s.sendRequest),l=s.clearError,u=Object(o.useContext)(h),d=Object(o.useState)(!1),j=Object(p.a)(d,2),b=j[0],O=j[1],m=Object(o.useState)(""),v=Object(p.a)(m,2),y=v[0],k=v[1],C=function(){var e=Object(f.a)(x.a.mark((function e(){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(c),0===c){e.next=17;break}return e.prev=2,e.next=5,i("content/getJournalById","POST",JSON.stringify({jid:c}),{"Content-Type":"application/json",Authorization:"Bearer "+u.token});case 5:r=e.sent,k(r.journal.journal),console.log(r.journal.journal),O((function(e){return!e})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),setTimeout((function(){l()}),5e3);case 15:e.next=18;break;case 17:O((function(e){return!e}));case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:N.a.weekCubeWrapper,children:[Object(g.jsx)("div",{className:N.a.weekCube,style:{backgroundColor:"".concat(a)},onClick:C}),Object(g.jsx)("div",{className:N.a.weekCubeInfo,children:Object(g.jsx)("div",{children:"".concat(t.getMonth()+1,"/").concat(t.getDate()," - ").concat(n.getMonth()+1,"/").concat(n.getDate())})}),Object(g.jsx)(T,{showModal:b,onHandleClose:function(){O(!1)},info:e.weekInfo,journal:y,mode:"week"})]})})},I=t(119),D=t.n(I),J=t(120),L=t.n(J),W=function(e){return Object(g.jsx)("div",{className:L.a.cube,style:{backgroundColor:"".concat(e.color)},onClick:e.onCubeClick})},P=function(e){var r=e.quarter,t=(r.quarter,r.endDate,r.color),n=r.jid,a=B(),c=(a.isLoading,a.error,a.sendRequest),s=a.clearError,i=Object(o.useContext)(h),l=Object(o.useState)(""),u=Object(p.a)(l,2),d=u[0],j=u[1],b=Object(o.useState)(!1),O=Object(p.a)(b,2),m=O[0],v=O[1],y=function(){var e=Object(f.a)(x.a.mark((function e(){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===n){e.next=16;break}return e.prev=1,e.next=4,c("content/getJournalById","POST",JSON.stringify({jid:n}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 4:r=e.sent,j(r.journal.journal),console.log(r.journal.journal),v((function(e){return!e})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){s()}),5e3);case 14:e.next=17;break;case 16:v((function(e){return!e}));case 17:console.log("cube clicked");case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:D.a.quarter,children:[Object(g.jsx)(W,{onCubeClick:y,color:t}),Object(g.jsx)(T,{showModal:m,onHandleClose:function(){v(!1)},year:e.year,info:e.quarter,journal:d,mode:"quarter"}),e.quarter.weeks&&e.quarter.weeks.length>0&&e.quarter.weeks.map((function(e,r){return Object(g.jsx)(E,{weekInfo:e},r)}))]})},Y=t(93),F=t.n(Y),A=function(e){var r=Object(o.useState)(!1),t=Object(p.a)(r,2),n=t[0],a=t[1],c=Object(o.useState)(""),s=Object(p.a)(c,2),i=s[0],l=s[1],u=e.year,d=u.color,j=u.jid,b=B(),O=(b.isLoading,b.error,b.sendRequest),m=b.clearError,v=Object(o.useContext)(h),y=function(){var e=Object(f.a)(x.a.mark((function e(){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===j){e.next=16;break}return e.prev=1,e.next=4,O("content/getJournalById","POST",JSON.stringify({jid:j}),{"Content-Type":"application/json",Authorization:"Bearer "+v.token});case 4:r=e.sent,l(r.journal.journal),console.log(r.journal.journal),a((function(e){return!e})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){m()}),5e3);case 14:e.next=17;break;case 16:a((function(e){return!e}));case 17:console.log("cube clicked");case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:F.a.quarterWrapper,children:[Object(g.jsx)("div",{className:F.a.yearTextHidden,style:{backgroundColor:"".concat(d)},onClick:y,children:e.year.currentYear}),Object(g.jsx)(P,{quarter:e.year.quarters[0],year:e.year.currentYear},1),Object(g.jsx)(P,{quarter:e.year.quarters[1],year:e.year.currentYear},2),Object(g.jsx)(P,{quarter:e.year.quarters[2],year:e.year.currentYear},3),Object(g.jsx)(P,{quarter:e.year.quarters[3],year:e.year.currentYear},4),Object(g.jsx)(T,{showModal:n,onHandleClose:function(){a(!1)},info:e.year,journal:i,mode:"year"})]})},M=t(28),H=t(78),R=t.n(H),V=t(46),z=t(74),Q=Object(z.b)({name:"color",initialState:{value:{weekColor:["#d8f3dc","#95d5b2","#52b788","#2d6a4f"],quarterColor:["#e0aaff","#c77dff","#9d4edd","#7b2cbf"],yearColor:["#fae0e4","#f9bec7","#ff99ac","#ff5c8a"]}},reducers:{changeWeekColor:function(e,r){e.value.weekColor=r.payload},changeQuarterColor:function(e,r){e.value.quarterColor=r.payload},changeYearColor:function(e,r){e.value.yearColor=r.payload}}}),G=Q.actions,U=(G.changeWeekColor,G.changeQuarterColor,G.changeYearColor,function(e){return e.color.value}),$=Q.reducer,K=function(){var e=Object(o.useState)(null),r=Object(p.a)(e,2),t=r[0],n=r[1],a=Object(o.useState)("yearWrapperHide"),c=Object(p.a)(a,2),s=c[0],i=c[1],l=Object(o.useState)(!1),u=Object(p.a)(l,2),d=u[0],j=u[1],b=Object(o.useContext)(h),O=B(),m=(O.isLoading,O.error,O.sendRequest),v=(O.clearError,Object(V.b)(U));return Object(o.useEffect)((function(){(function(){var e=Object(f.a)(x.a.mark((function e(){var r,t,a,o,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("users/getWeekObj","POST",JSON.stringify({}),{"Content-Type":"application/json",Authorization:"Bearer "+b.token});case 3:r=e.sent,t=r.weekObj,a=t.expectedYears,o=t.birthday,console.log(r.weekObj),c=C(a,new Date(o)),s=w(c,r.weekObj,v),console.log("loaded week obj",s),j(!0),setTimeout((function(){n(s)}),1e3),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(o.useEffect)((function(){console.log("loaded"),j(!1),t&&i("yearWrapperShow")}),[t]),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:R.a.loading,children:d&&Object(g.jsx)(M.a,{animation:"border",role:"status",children:Object(g.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(g.jsx)("div",{className:"".concat(R.a.yearWrapper," ").concat(R.a[s]),children:t&&t.years.map((function(e,r){return Object(g.jsx)(A,{year:e},r)}))})]})},X=t(42),Z=t(24),ee=t(7),re=t(45),te=t(22),ne=t.n(te),ae=function(e){var r=Object(o.useContext)(h),t=Object(l.g)(),n=B(),a=n.isLoading,c=n.error,s=n.sendRequest,i=n.clearError,u=Object(o.useState)(!1),d=Object(p.a)(u,2),j=d[0],O=d[1],m=function(){var e=Object(f.a)(x.a.mark((function e(n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("users/login","POST",JSON.stringify({email:n.loginEmail,password:n.loginPassword}),{"Content-Type":"application/json"});case 3:a=e.sent,r.login(a.userId,a.token),console.log("signing in",a.weekObj),null==a.weekObj.birthday?(console.log("years is null"),t.push("/setup")):t.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),setTimeout((function(){i()}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(x.a.mark((function e(n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("users/signup","POST",JSON.stringify({name:n.signupName,email:n.signupEmail,password:n.signupPassword}),{"Content-Type":"application/json"});case 3:a=e.sent,console.log("responseDate"),console.log(a),r.login(a.user.id,a.token),console.log("signing up",a.user),null==a.user.weekObj&&(console.log("signing up pushed to setup"),t.push("/setup")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),setTimeout((function(){i()}),5e3);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(r){return e.apply(this,arguments)}}(),y=Object(X.a)({initialValues:{signupName:"",signupPassword:"",signupEmail:""},validationSchema:Z.a({signupName:Z.b().max(15,"Must be 15 characters or less").required("Required"),signupPassword:Z.b().min(6,"Must be at 6 characters").required("Required"),signupEmail:Z.b().email("Invalid email address").required("Required")}),onSubmit:v}),k=Object(X.a)({initialValues:{loginEmail:"",loginPassword:""},validationSchema:Z.a({loginEmail:Z.b().email("Invalid email address").required("Required"),loginPassword:Z.b().required("Required")}),onSubmit:m});return Object(g.jsx)("div",{className:ne.a.centerDiv,children:Object(g.jsxs)("div",{className:ne.a.loginWrapper,children:[Object(g.jsxs)("div",{className:ne.a.descWrapper,children:[Object(g.jsx)("div",{className:ne.a.descTitle,children:"Welcome"}),Object(g.jsx)("div",{className:ne.a.descContent,children:"Make week journal is easier than before !"})]}),!j&&Object(g.jsxs)("div",{className:ne.a.login,children:[Object(g.jsx)("div",{className:ne.a.loginTitle,children:"Login"}),Object(g.jsxs)(ee.a,{onSubmit:k.handleSubmit,children:[Object(g.jsxs)(ee.a.Group,{controlId:"loginEmail",children:[Object(g.jsx)(ee.a.Label,{style:{color:"#999"},children:"Email address"}),Object(g.jsx)(ee.a.Control,{name:"loginEmail",type:"email",placeholder:"Enter email",onChange:k.handleChange,onBlur:k.handleBlur,value:k.values.loginEmail,isValid:k.touched.loginEmail&&!k.errors.loginEmail,isInvalid:!!k.errors.loginEmail}),Object(g.jsx)(ee.a.Control.Feedback,{type:"invalid",children:k.errors.loginEmail})]}),Object(g.jsxs)(ee.a.Group,{controlId:"loginPassword",children:[Object(g.jsx)(ee.a.Label,{style:{color:"#999"},children:"Password"}),Object(g.jsx)(ee.a.Control,{name:"loginPassword",type:"password",placeholder:"Password",onChange:k.handleChange,onBlur:k.handleBlur,value:k.values.loginPassword,isValid:k.touched.loginPassword&&!k.errors.loginPassword,isInvalid:!!k.errors.loginPassword}),Object(g.jsx)(ee.a.Control.Feedback,{type:"invalid",children:k.errors.loginPassword})]}),c&&Object(g.jsx)(re.a,{variant:"danger",children:c}),Object(g.jsxs)(b.a,{variant:"primary",type:"submit",children:[a&&Object(g.jsx)(M.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]}),Object(g.jsx)("div",{className:ne.a.loginToSignup,onClick:function(){return O(!0)},children:"Don't have an account? Sign up here"})]})]}),j&&Object(g.jsxs)("div",{className:ne.a.login,children:[Object(g.jsx)("div",{className:ne.a.loginTitle,children:"Sign Up"}),Object(g.jsxs)(ee.a,{onSubmit:y.handleSubmit,children:[Object(g.jsxs)(ee.a.Group,{controlId:"signupName",children:[Object(g.jsx)(ee.a.Label,{style:{color:"#999"},children:"Name"}),Object(g.jsx)(ee.a.Control,{name:"signupName",type:"text",placeholder:"Enter username",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.signupName,isValid:y.touched.signupName&&!y.errors.signupName,isInvalid:!!y.errors.signupName}),Object(g.jsx)(ee.a.Control.Feedback,{type:"invalid",children:y.errors.signupName})]}),Object(g.jsxs)(ee.a.Group,{controlId:"signupEmail",children:[Object(g.jsx)(ee.a.Label,{style:{color:"#999"},children:"Email address"}),Object(g.jsx)(ee.a.Control,{name:"signupEmail",type:"email",placeholder:"Enter email",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.signupEmail,isValid:y.touched.signupEmail&&!y.errors.signupEmail,isInvalid:!!y.errors.signupEmail}),Object(g.jsx)(ee.a.Control.Feedback,{type:"invalid",children:y.errors.signupEmail})]}),Object(g.jsxs)(ee.a.Group,{controlId:"signupPassword",children:[Object(g.jsx)(ee.a.Label,{style:{color:"#999"},children:"Password"}),Object(g.jsx)(ee.a.Control,{name:"signupPassword",type:"password",placeholder:"Password",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.signupPassword,isValid:y.touched.signupPassword&&!y.errors.signupPassword,isInvalid:!!y.errors.signupPassword}),Object(g.jsx)(ee.a.Control.Feedback,{type:"invalid",children:y.errors.signupPassword})]}),c&&Object(g.jsx)(re.a,{variant:"danger",children:c}),Object(g.jsxs)(b.a,{variant:"primary",type:"submit",children:[a&&Object(g.jsx)(M.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]}),Object(g.jsx)("div",{className:ne.a.loginToSignup,onClick:function(){return O(!1)},children:"Have an account? Login here"})]})]})]})})},oe=t(126),ce=t.n(oe),se=function(){var e=B(),r=e.isLoading,t=(e.error,e.sendRequest),n=e.clearError,a=Object(l.g)(),c=Object(o.useContext)(h),s=/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,i=/^[1-9]$|^[1-9][0-9]$|^(100)$/,u=function(){var e=Object(f.a)(x.a.mark((function e(r){var o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("setupHandler",r.yearNum,r.dateBirth),o={yearJournal:[],quarterJournal:[],weekJournal:[],expectedYears:r.yearNum,birthday:r.dateBirth},e.prev=2,e.next=5,t("users/setup","POST",JSON.stringify({weekObj:o}),{"Content-Type":"application/json",Authorization:"Bearer "+c.token});case 5:s=e.sent,console.log(s.userId),a.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),setTimeout((function(){n()}),5e3);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(r){return e.apply(this,arguments)}}(),d=Object(X.a)({initialValues:{yearNum:"",dateBirth:""},validate:function(e){var r={};return e.yearNum?i.test(e.yearNum)||(r.yearNum="Must be integer between 0-100"):r.yearNum="Required",e.dateBirth?s.test(e.dateBirth)||(r.dateBirth="Invalid date of birth, Please use YYYY-MM-DD"):r.dateBirth="Required",r},onSubmit:u});return Object(g.jsx)("div",{className:ce.a.setupFormWrapper,children:Object(g.jsxs)(ee.a,{onSubmit:d.handleSubmit,children:[Object(g.jsxs)(ee.a.Group,{controlId:"yearNum",children:[Object(g.jsx)(ee.a.Label,{style:{color:"#999"},children:"How many years to include"}),Object(g.jsx)(ee.a.Control,{name:"yearNum",type:"text",placeholder:"Enter number of Years",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.yearNum,isValid:d.touched.yearNum&&!d.errors.yearNum,isInvalid:!!d.errors.yearNum}),Object(g.jsx)(ee.a.Control.Feedback,{type:"invalid",children:d.errors.yearNum})]}),Object(g.jsxs)(ee.a.Group,{controlId:"dateBirth",children:[Object(g.jsx)(ee.a.Label,{style:{color:"#999"},children:"Your birthday"}),Object(g.jsx)(ee.a.Control,{name:"dateBirth",type:"text",placeholder:"Enter your date of birth, YYYY-MM-DD",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.dateBirth,isValid:d.touched.dateBirth&&!d.errors.dateBirth,isInvalid:!!d.errors.dateBirth}),Object(g.jsx)(ee.a.Control.Feedback,{type:"invalid",children:d.errors.dateBirth})]}),Object(g.jsxs)(b.a,{variant:"primary",type:"submit",children:[r&&Object(g.jsx)(M.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]})]})})},ie=t(79),le=t.n(ie),ue=t(50),de=t.n(ue),je=function(e){var r=Object(o.useState)(),t=Object(p.a)(r,2),n=t[0],a=t[1],c=Object(o.useState)(3),s=Object(p.a)(c,2),i=s[0],l=s[1],u=Object(o.useState)(),d=Object(p.a)(u,2),j=d[0],b=d[1];Object(o.useEffect)((function(){console.log(e.colorList),b(e.colorList)}),[e.colorList]),Object(o.useEffect)((function(){j&&j.length>0&&a(j[3])}),[j]),Object(o.useEffect)((function(){e.onChooseColor(3)}),[]);var h=function(r){a(j[r]),l(r),e.onChooseColor(r)};return Object(g.jsx)("div",{children:j&&Object(g.jsxs)("div",{className:de.a.btnWrapper,children:[Object(g.jsx)("div",{onClick:function(){return h(0)},className:de.a.btnBase,style:{backgroundColor:0===i?"".concat(n):""},children:j[0]}),Object(g.jsx)("div",{onClick:function(){return h(1)},className:de.a.btnBase,style:{backgroundColor:1===i?"".concat(n):""},children:j[1]}),Object(g.jsx)("div",{onClick:function(){return h(2)},className:de.a.btnBase,style:{backgroundColor:2===i?"".concat(n):""},children:j[2]}),Object(g.jsx)("div",{onClick:function(){return h(3)},className:de.a.btnBase,style:{backgroundColor:3===i?"".concat(n):""},children:j[3]})]})})},be=function(e){var r=Object(l.h)(),t=r.yearNum,n=r.quarter,a=r.weekNum,c=r.jid,s=r.mode,i=Object(o.useContext)(h),u=Object(l.g)(),d=B(),j=d.isLoading,O=d.error,m=d.sendRequest,v=d.clearError,y=Object(V.b)(U),k=Object(o.useState)(),C=Object(p.a)(k,2),w=C[0],S=C[1],N=Object(o.useState)(),_=Object(p.a)(N,2),q=_[0],T=_[1],E=Object(o.useState)(!0),I=Object(p.a)(E,2),D=I[0],J=I[1];Object(o.useEffect)((function(){switch(0!=c&&J(!1),setTimeout((function(){console.log(y)}),1e3),function(){var e=Object(f.a)(x.a.mark((function e(){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==c){e.next=13;break}return e.prev=1,e.next=4,m("content/getJournalById","POST",JSON.stringify({jid:c}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 4:return r=e.sent,e.next=7,P.setFieldValue("journal",r.journal.journal);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){v()}),5e3);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()(),s){case"week":S("Weekly Journal");break;case"quarter":S("Quarterly Journal");break;case"year":S("Yearly Journal")}console.log(t,n,a,c,s)}),[]);var L=function(){var e=Object(f.a)(x.a.mark((function e(r){var o,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(r.journal),!D){e.next=16;break}return e.prev=2,e.next=5,m("content/postJournal","POST",JSON.stringify({journal:r.journal,yearNum:t,quarter:n,weekNum:a,mode:s,color:q}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 5:o=e.sent,u.push("/"),console.log(o),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),setTimeout((function(){v()}),5e3);case 14:e.next=28;break;case 16:return e.prev=16,e.next=19,m("content/updateJournal","PATCH",JSON.stringify({jid:c,journal:r.journal}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 19:l=e.sent,u.push("/"),console.log(l),e.next=28;break;case 24:e.prev=24,e.t1=e.catch(16),console.log(e.t1),setTimeout((function(){v()}),5e3);case 28:case"end":return e.stop()}}),e,null,[[2,10],[16,24]])})));return function(r){return e.apply(this,arguments)}}(),W=function(e){T(e),console.log("color value",e)},P=Object(X.a)({initialValues:{journal:""},validationSchema:Z.a({journal:Z.b().max(2e3).required("Required")}),onSubmit:L});return Object(g.jsx)("div",{className:le.a.pageWrapper,children:Object(g.jsxs)("div",{className:le.a.formWrapper,children:[Object(g.jsx)("div",{className:le.a.formTitle,children:w}),Object(g.jsxs)(ee.a,{onSubmit:P.handleSubmit,children:[Object(g.jsxs)(ee.a.Group,{controlId:"journal",children:[Object(g.jsx)(ee.a.Control,{as:"textarea",name:"journal",type:"textarea",placeholder:"Enter journal",onChange:P.handleChange,onBlur:P.handleBlur,value:P.values.journal,isValid:P.touched.journal&&!P.errors.journal,isInvalid:!!P.errors.journal},"journal"),Object(g.jsx)(ee.a.Control.Feedback,{type:"invalid",children:P.errors.journal})]}),D&&"week"===s&&Object(g.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(g.jsx)("div",{style:{fontSize:"1rem",color:"#666"},children:"Choose a cube color"}),Object(g.jsx)(je,{colorList:y.weekColor,onChooseColor:W})]}),D&&"quarter"===s&&Object(g.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(g.jsx)("div",{style:{fontSize:"1rem",color:"#666"},children:"Choose a cube color"}),Object(g.jsx)(je,{colorList:y.quarterColor,onChooseColor:W})]}),D&&"year"===s&&Object(g.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(g.jsx)("div",{style:{fontSize:"1rem",color:"#666"},children:"Choose a cube color"}),Object(g.jsx)(je,{colorList:y.yearColor,onChooseColor:W})]}),O&&Object(g.jsx)(re.a,{variant:"danger",children:O}),Object(g.jsxs)(b.a,{variant:"primary",type:"submit",children:[j&&Object(g.jsx)(M.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]})]})]})})};var pe=function(){var e,r=function(){console.log("app is rerendering");var e=Object(o.useState)(!1),r=Object(p.a)(e,2),t=r[0],a=r[1],c=Object(o.useState)(),s=Object(p.a)(c,2),i=s[0],l=s[1],u=Object(o.useState)(),d=Object(p.a)(u,2),j=d[0],b=d[1],h=Object(o.useCallback)((function(e,r,t){console.log(e),b(e),a(r);var n=t||new Date((new Date).getTime()+36e5);l(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:r,expiration:n.toISOString()}))}),[]),g=Object(o.useCallback)((function(){a(t),l(null),b(null),localStorage.removeItem("userData")}),[]);return Object(o.useEffect)((function(){if(console.log("timeout reached"),t&&i){var e=i.getTime()-(new Date).getTime();n=setTimeout(g,e)}else clearTimeout(n)}),[t,g,i]),Object(o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&h(e.userId,e.token)}),[h]),{token:t,login:h,logout:g,userId:j}}(),t=r.token,a=r.logout,c=r.login,s=r.userId;return Object(o.useContext)(h),e=t?Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.b,{path:"/",exact:!0,children:Object(g.jsx)(K,{})}),Object(g.jsx)(l.b,{path:"/login",exact:!0,children:Object(g.jsx)(ae,{})}),Object(g.jsx)(l.b,{path:"/setup",exact:!0,children:Object(g.jsx)(se,{})}),Object(g.jsx)(l.b,{path:"/add-journal/:yearNum/:quarter/:weekNum/:jid/:mode",exact:!0,children:Object(g.jsx)(be,{})}),Object(g.jsx)(l.a,{to:"/"})]}):Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.b,{path:"/login",children:Object(g.jsx)(ae,{})}),Object(g.jsx)(l.a,{to:"/login"})]}),Object(g.jsx)(h.Provider,{value:{isLoggedIn:!!t,token:t,userId:s,login:c,logout:a},children:Object(g.jsxs)(u.a,{children:[Object(g.jsx)(O,{}),e]})})},he=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,243)).then((function(r){var t=r.getCLS,n=r.getFID,a=r.getFCP,o=r.getLCP,c=r.getTTFB;t(e),n(e),a(e),o(e),c(e)}))},ge=Object(z.a)({reducer:{color:$}});i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(V.a,{store:ge,children:Object(g.jsx)(pe,{})})}),document.getElementById("root")),he()},50:function(e,r,t){e.exports={btnBase:"ColorChoosingButton_btnBase__3iVB1",btnWrapper:"ColorChoosingButton_btnWrapper__lVwYI"}},77:function(e,r,t){e.exports={weekCubeWrapper:"WeekSection_weekCubeWrapper__32Eda",weekCube:"WeekSection_weekCube__3Pxah",weekCubeInfo:"WeekSection_weekCubeInfo__1lAs-",weekCubeCard:"WeekSection_weekCubeCard__DPcbA"}},78:function(e,r,t){e.exports={yearWrapper:"Main_yearWrapper__2_i-g",yearWrapperHide:"Main_yearWrapperHide__3FvKx",yearWrapperShow:"Main_yearWrapperShow__3ozvC",loading:"Main_loading__3eJaj"}},79:function(e,r,t){e.exports={pageWrapper:"AddJornal_pageWrapper__2c7C8",formWrapper:"AddJornal_formWrapper__q8XR6",formTitle:"AddJornal_formTitle__2ADVn"}},93:function(e,r,t){e.exports={quarterWrapper:"YearSection_quarterWrapper__-raIp",yearTextHidden:"YearSection_yearTextHidden__4U3QO"}}},[[239,1,2]]]);
//# sourceMappingURL=main.f75aafc6.chunk.js.map