(this["webpackJsonpweeko-meter"]=this["webpackJsonpweeko-meter"]||[]).push([[0],{121:function(e,r,t){e.exports={quarter:"QuarterSection_quarter__1LJDD"}},122:function(e,r,t){e.exports={cube:"QuarterCube_cube__26OCD"}},128:function(e,r,t){e.exports={setupFormWrapper:"SetUp_setupFormWrapper__2uNAI"}},134:function(e,r,t){},136:function(e,r,t){},22:function(e,r,t){e.exports={centerDiv:"Login_centerDiv__3UFTf",loginWrapper:"Login_loginWrapper__UVlmr",descWrapper:"Login_descWrapper__3uq3K",descTitle:"Login_descTitle__2LcUb",descContent:"Login_descContent__3Jg4D",login:"Login_login__f0uP3",loginTitle:"Login_loginTitle__LEyc1",loginToSignup:"Login_loginToSignup__11wCM"}},242:function(e,r,t){"use strict";t.r(r);var n,a,o=t(0),c=t.n(o),s=t(25),i=t.n(s),l=(t(134),t(135),t.p,t(136),t(10)),u=t(16),d=t(56),j=t(82),b=t(15),p=t(246),h=t(8),g=Object(o.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),O=t(77),m=t.n(O),x=t(1),f=function(){var e=Object(o.useContext)(g);return Object(x.jsxs)(d.a,{bg:"#a9d6e5",expand:"lg",children:[Object(x.jsx)(d.a.Brand,{className:m.a.NavTitle,id:m.a.idNav,children:"Week Journal"}),Object(x.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(d.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsxs)(j.a,{className:"mr-auto",children:[e.isLoggedIn&&Object(x.jsx)(j.a.Link,{as:u.b,to:"/",children:"Home"}),Object(x.jsx)(j.a.Link,{as:u.b,to:"/about",children:"About"})]}),Object(x.jsx)("a",{href:"https://github.com/Anting-Chang/weeko-meter",children:Object(x.jsx)(p.a,{className:m.a.githubIcon})}),!e.isLoggedIn&&Object(x.jsx)(u.b,{to:"/login",children:Object(x.jsx)(b.a,{variant:"outline-success",children:"Login"})}),e.isLoggedIn&&Object(x.jsx)(b.a,{variant:"outline-dark",onClick:function(){e.logout()},children:"Sign Out"})]})]})},v=t(9),y=t.n(v),k=t(13),w={},C=function(e,r){for(var t=0,n=3*r-1,o=a.getFullYear();a.getMonth()<=n&&a.getFullYear()===o;){var c=N(a);w.years[e].quarters[r-1].weeks.push({yearNum:e,quarter:r,weekNum:t,startDate:a,endDate:c,color:"#ccc",jid:0}),t++,a=c}},N=function(e){var r=new Date(e);return r.setDate(r.getDate()+7),r},S=function(e,r){r.setDate(r.getDate()-r.getDay()),w={startDate:r,years:[]};var t=r.getFullYear();a=new Date(r);for(var n=0;n<e;n++){w.years.push({yearNum:n,jid:0,currentYear:t+n,color:"#e9ecef",quarters:[]});for(var o=1;o<5;o++)w.years[n].quarters.push({yearNum:n,quarter:o,jid:0,color:"#aaa",weeks:[]}),C(n,o)}return console.log(w),w},_=function(e,r,t){return r.weekJournal.length>0&&r.weekJournal.map((function(r){var n=r.jid,a=r.yearNum,o=r.quarter,c=r.weekNum,s=r.color;console.log("add journal to created function week",r),e.years[a].quarters[o-1].weeks[c].jid=n,e.years[a].quarters[o-1].weeks[c].color=s>=0?t.weekColor[s]:s,console.log("got lots of years")})),r.quarterJournal.length>0&&r.quarterJournal.map((function(r){var n=r.jid,a=r.yearNum,o=r.quarter,c=r.color;console.log("add journal to created function quarter",r);var s=Number(c);e.years[a].quarters[o-1].jid=n,e.years[a].quarters[o-1].color=s?t.quarterColor[s]:c})),r.yearJournal.length>0&&r.yearJournal.map((function(r){var n=r.jid,a=r.yearNum,o=r.color;console.log("add journal to created function year",r),e.years[a].jid=n,e.years[a].color=o>=0?t.yearColor[o]:o})),e},q=t(78),T=t.n(q),B=t(33),E={1:"First Quarter",2:"Second Quarter",3:"Third Quarter",4:"Fourth Quarter"},I=function(e){var r=e.info.jid;return Object(x.jsxs)(B.a,{show:e.showModal,onHide:e.onHandleClose,backdrop:"static",keyboard:!1,children:[Object(x.jsxs)(B.a.Header,{closeButton:!0,children:["week"===e.mode&&Object(x.jsxs)("div",{children:[Object(x.jsx)(B.a.Title,{children:"Week Information"}),Object(x.jsxs)("p",{children:[e.info.startDate.toDateString()," - ",e.info.endDate.toDateString()]})]}),"quarter"===e.mode&&Object(x.jsxs)("div",{children:[Object(x.jsx)(B.a.Title,{children:"Quarter Information"}),Object(x.jsx)("p",{children:E[e.quarter]})]}),"year"===e.mode&&Object(x.jsxs)("div",{children:[Object(x.jsx)(B.a.Title,{children:"Year Information"}),Object(x.jsx)("p",{children:e.info.currentYear})]})]}),Object(x.jsxs)(B.a.Body,{children:[!e.journal&&Object(x.jsx)("div",{style:{color:"#999"},children:"Does not have a journal ... yet :)"}),"week"===e.mode&&e.journal&&Object(x.jsx)("div",{children:e.journal}),"quarter"===e.mode&&e.journal&&Object(x.jsx)("div",{children:e.journal}),"year"===e.mode&&e.journal&&Object(x.jsx)("div",{children:e.journal})]}),Object(x.jsxs)(B.a.Footer,{children:["week"===e.mode&&Object(x.jsx)(u.b,{to:"/add-journal/".concat(e.info.yearNum,"/").concat(e.info.quarter,"/").concat(e.info.weekNum,"/").concat(r,"/week"),children:Object(x.jsx)(b.a,{onClick:e.onHandleClose,children:e.journal?"Edit Journal":"Add A Journal"})}),"quarter"===e.mode&&Object(x.jsx)(u.b,{to:"/add-journal/".concat(e.info.yearNum,"/").concat(e.info.quarter,"/-1/").concat(r,"/quarter"),children:Object(x.jsx)(b.a,{onClick:e.onHandleClose,children:e.journal?"Edit Journal":"Add A Journal"})}),"year"===e.mode&&Object(x.jsx)(u.b,{to:"/add-journal/".concat(e.info.yearNum,"/-1/-1/").concat(r,"/year"),children:Object(x.jsx)(b.a,{onClick:e.onHandleClose,children:e.journal?"Edit Journal":"Add A Journal"})})]})]})},W=function(){var e=Object(o.useState)(!1),r=Object(h.a)(e,2),t=r[0],n=r[1],a=Object(o.useState)(),c=Object(h.a)(a,2),s=c[0],i=c[1],l=Object(o.useRef)([]),u=Object(o.useCallback)(function(){var e=Object(k.a)(y.a.mark((function e(r){var t,a,o,c,s,u,d,j=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.length>1&&void 0!==j[1]?j[1]:"GET",a=j.length>2&&void 0!==j[2]?j[2]:null,o=j.length>3&&void 0!==j[3]?j[3]:{},n(!0),c=new AbortController,l.current.push(c),s="https://weeko-meter.herokuapp.com/api/"+r,e.prev=7,e.next=10,fetch(s,{method:t,body:a,headers:o,signal:c.signal});case 10:return u=e.sent,e.next=13,u.json();case 13:if(d=e.sent,l.current=l.current.filter((function(e){return e!==c})),n(!1),u.ok){e.next=18;break}throw new Error(d.message);case 18:return e.abrupt("return",d);case 21:throw e.prev=21,e.t0=e.catch(7),i(e.t0.message),n(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[7,21]])})));return function(r){return e.apply(this,arguments)}}(),[]);return Object(o.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:t,error:s,sendRequest:u,clearError:function(){i(null)}}},D=function(e){var r=e.weekInfo,t=r.startDate,n=r.endDate,a=r.color,c=r.jid,s=W(),i=(s.isLoading,s.error,s.sendRequest),l=s.clearError,u=Object(o.useContext)(g),d=Object(o.useState)(!1),j=Object(h.a)(d,2),b=j[0],p=j[1],O=Object(o.useState)(""),m=Object(h.a)(O,2),f=m[0],v=m[1],w=function(){var e=Object(k.a)(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(c),0===c){e.next=17;break}return e.prev=2,e.next=5,i("content/getJournalById","POST",JSON.stringify({jid:c}),{"Content-Type":"application/json",Authorization:"Bearer "+u.token});case 5:r=e.sent,v(r.journal.journal),console.log(r.journal.journal),p((function(e){return!e})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),setTimeout((function(){l()}),5e3);case 15:e.next=18;break;case 17:p((function(e){return!e}));case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:T.a.weekCubeWrapper,children:[Object(x.jsx)("div",{className:T.a.weekCube,style:{backgroundColor:"".concat(a)},onClick:w}),Object(x.jsx)("div",{className:T.a.weekCubeInfo,children:Object(x.jsx)("div",{children:"".concat(t.getMonth()+1,"/").concat(t.getDate()," - ").concat(n.getMonth()+1,"/").concat(n.getDate())})}),Object(x.jsx)(I,{showModal:b,onHandleClose:function(){p(!1)},info:e.weekInfo,journal:f,mode:"week"})]})})},J=t(121),L=t.n(J),P=t(122),Y=t.n(P),A=function(e){return Object(x.jsx)("div",{className:Y.a.cube,style:{backgroundColor:"".concat(e.color)},onClick:e.onCubeClick})},F=function(e){var r=e.quarter,t=(r.quarter,r.endDate,r.color),n=r.jid,a=W(),c=(a.isLoading,a.error,a.sendRequest),s=a.clearError,i=Object(o.useContext)(g),l=Object(o.useState)(""),u=Object(h.a)(l,2),d=u[0],j=u[1],b=Object(o.useState)(!1),p=Object(h.a)(b,2),O=p[0],m=p[1],f=function(){var e=Object(k.a)(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===n){e.next=16;break}return e.prev=1,e.next=4,c("content/getJournalById","POST",JSON.stringify({jid:n}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 4:r=e.sent,j(r.journal.journal),console.log(r.journal.journal),m((function(e){return!e})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){s()}),5e3);case 14:e.next=17;break;case 16:m((function(e){return!e}));case 17:console.log("cube clicked");case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:L.a.quarter,children:[Object(x.jsx)(A,{onCubeClick:f,color:t}),Object(x.jsx)(I,{showModal:O,onHandleClose:function(){m(!1)},year:e.year,info:e.quarter,journal:d,mode:"quarter"}),e.quarter.weeks&&e.quarter.weeks.length>0&&e.quarter.weeks.map((function(e,r){return Object(x.jsx)(D,{weekInfo:e},r)}))]})},M=t(96),H=t.n(M),z=function(e){var r=Object(o.useState)(!1),t=Object(h.a)(r,2),n=t[0],a=t[1],c=Object(o.useState)(""),s=Object(h.a)(c,2),i=s[0],l=s[1],u=e.year,d=u.color,j=u.jid,b=W(),p=(b.isLoading,b.error,b.sendRequest),O=b.clearError,m=Object(o.useContext)(g),f=function(){var e=Object(k.a)(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===j){e.next=16;break}return e.prev=1,e.next=4,p("content/getJournalById","POST",JSON.stringify({jid:j}),{"Content-Type":"application/json",Authorization:"Bearer "+m.token});case 4:r=e.sent,l(r.journal.journal),console.log(r.journal.journal),a((function(e){return!e})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){O()}),5e3);case 14:e.next=17;break;case 16:a((function(e){return!e}));case 17:console.log("cube clicked");case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:H.a.quarterWrapper,children:[Object(x.jsx)("div",{className:H.a.yearTextHidden,style:{backgroundColor:"".concat(d)},onClick:f,children:e.year.currentYear}),Object(x.jsx)(F,{quarter:e.year.quarters[0],year:e.year.currentYear},1),Object(x.jsx)(F,{quarter:e.year.quarters[1],year:e.year.currentYear},2),Object(x.jsx)(F,{quarter:e.year.quarters[2],year:e.year.currentYear},3),Object(x.jsx)(F,{quarter:e.year.quarters[3],year:e.year.currentYear},4),Object(x.jsx)(I,{showModal:n,onHandleClose:function(){a(!1)},info:e.year,journal:i,mode:"year"})]})},R=t(29),V=t(26),Q=t(79),G=t.n(Q),U=t(46),$=t(74),K=Object($.b)({name:"color",initialState:{value:{weekColor:["#d8f3dc","#95d5b2","#52b788","#2d6a4f"],quarterColor:["#e0aaff","#c77dff","#9d4edd","#7b2cbf"],yearColor:["#fae0e4","#f9bec7","#ff99ac","#ff5c8a"]}},reducers:{changeWeekColor:function(e,r){e.value.weekColor=r.payload},changeQuarterColor:function(e,r){e.value.quarterColor=r.payload},changeYearColor:function(e,r){e.value.yearColor=r.payload}}}),X=K.actions,Z=(X.changeWeekColor,X.changeQuarterColor,X.changeYearColor,function(e){return e.color.value}),ee=K.reducer,re=function(){var e=Object(o.useState)(null),r=Object(h.a)(e,2),t=r[0],n=r[1],a=Object(o.useState)("yearWrapperHide"),c=Object(h.a)(a,2),s=c[0],i=c[1],l=Object(o.useState)(!1),u=Object(h.a)(l,2),d=u[0],j=u[1],b=Object(o.useState)(!0),p=Object(h.a)(b,2),O=p[0],m=p[1],f=window,v=f.innerWidth,w=(f.innerHeight,window.screen.width),C=Object(o.useContext)(g),N=W(),q=(N.isLoading,N.error,N.sendRequest),T=(N.clearError,Object(U.b)(Z));Object(o.useEffect)((function(){(function(){var e=Object(k.a)(y.a.mark((function e(){var r,t,a,o,c,s,i,l,u,d,b,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q("users/getWeekObj","POST",JSON.stringify({}),{"Content-Type":"application/json",Authorization:"Bearer "+C.token});case 3:r=e.sent,t=r.weekObj,a=t.expectedYears,o=t.birthday,console.log("window width",v),w<1e3?(s=new Date,i=s.getFullYear(),l=new Date(o),u=l.getFullYear(),s.setFullYear(i-2),d=S(a,new Date(o)),console.log("createdWeekObj"),c=_(d,r.weekObj,T),console.log("loadedWeekObj"),b=c.years.slice(i-u-2,i-u+4),console.log("yearsObj",b),c.years=b,console.log(c.years)):(p=S(a,new Date(o)),c=_(p,r.weekObj,T)),console.log("loaded week obj",c),j(!0),setTimeout((function(){n(c)}),1e3),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(o.useEffect)((function(){console.log("loaded"),j(!1),t&&i("yearWrapperShow")}),[t]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:G.a.loading,children:Object(x.jsxs)("div",{children:[d&&Object(x.jsx)(R.a,{animation:"border",role:"status",children:Object(x.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(x.jsx)("div",{children:O&&!d&&Object(x.jsx)(V.a,{variant:"dark",onClose:function(){m(!1)},dismissible:!0,children:"You can click on every cube to record your journal! Even those long year cubes. Put yearly resolutions in there and see how far it misses when next year come."})}),Object(x.jsx)("div",{children:!d&&w<500&&Object(x.jsx)(V.a,{variant:"dark",children:"Try it on the desktop as well! The app is meant to show whole life and all of the journals in one single page."})})]})}),Object(x.jsx)("div",{className:"".concat(G.a.yearWrapper," ").concat(G.a[s]),children:t&&t.years.map((function(e,r){return Object(x.jsx)(z,{year:e},r)}))})]})},te=t(43),ne=t(24),ae=t(7),oe=t(22),ce=t.n(oe),se=function(e){var r=Object(o.useContext)(g),t=Object(l.g)(),n=W(),a=n.isLoading,c=n.error,s=n.sendRequest,i=n.clearError,u=Object(o.useState)(!1),d=Object(h.a)(u,2),j=d[0],p=d[1],O=function(){var e=Object(k.a)(y.a.mark((function e(n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("users/login","POST",JSON.stringify({email:n.loginEmail,password:n.loginPassword}),{"Content-Type":"application/json"});case 3:a=e.sent,r.login(a.userId,a.token),console.log("signing in",a.weekObj),null==a.weekObj.birthday?(console.log("years is null"),t.push("/setup")):t.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),setTimeout((function(){i()}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),m=function(){var e=Object(k.a)(y.a.mark((function e(n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("users/signup","POST",JSON.stringify({name:n.signupName,email:n.signupEmail,password:n.signupPassword}),{"Content-Type":"application/json"});case 3:a=e.sent,console.log("responseDate"),console.log(a),r.login(a.user.id,a.token),console.log("signing up",a.user),null==a.user.weekObj&&(console.log("signing up pushed to setup"),t.push("/setup")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),setTimeout((function(){i()}),5e3);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(r){return e.apply(this,arguments)}}(),f=Object(te.a)({initialValues:{signupName:"",signupPassword:"",signupEmail:""},validationSchema:ne.a({signupName:ne.b().max(15,"Must be 15 characters or less").required("Required"),signupPassword:ne.b().min(6,"Must be at 6 characters").required("Required"),signupEmail:ne.b().email("Invalid email address").required("Required")}),onSubmit:m}),v=Object(te.a)({initialValues:{loginEmail:"",loginPassword:""},validationSchema:ne.a({loginEmail:ne.b().email("Invalid email address").required("Required"),loginPassword:ne.b().required("Required")}),onSubmit:O});return Object(x.jsx)("div",{className:ce.a.centerDiv,children:Object(x.jsxs)("div",{className:ce.a.loginWrapper,children:[Object(x.jsxs)("div",{className:ce.a.descWrapper,children:[Object(x.jsx)("div",{className:ce.a.descTitle,children:"Welcome"}),Object(x.jsx)("div",{className:ce.a.descContent,children:"Make week journal is easier than before !"})]}),!j&&Object(x.jsxs)("div",{className:ce.a.login,children:[Object(x.jsx)("div",{className:ce.a.loginTitle,children:"Login"}),Object(x.jsxs)(ae.a,{onSubmit:v.handleSubmit,children:[Object(x.jsxs)(ae.a.Group,{controlId:"loginEmail",children:[Object(x.jsx)(ae.a.Label,{style:{color:"#999"},children:"Email address"}),Object(x.jsx)(ae.a.Control,{name:"loginEmail",type:"email",placeholder:"Enter email",onChange:v.handleChange,onBlur:v.handleBlur,value:v.values.loginEmail,isValid:v.touched.loginEmail&&!v.errors.loginEmail,isInvalid:!!v.errors.loginEmail&&v.touched.loginEmail}),Object(x.jsx)(ae.a.Control.Feedback,{type:"invalid",children:v.errors.loginEmail})]}),Object(x.jsxs)(ae.a.Group,{controlId:"loginPassword",children:[Object(x.jsx)(ae.a.Label,{style:{color:"#999"},children:"Password"}),Object(x.jsx)(ae.a.Control,{name:"loginPassword",type:"password",placeholder:"Password",onChange:v.handleChange,onBlur:v.handleBlur,value:v.values.loginPassword,isValid:v.touched.loginPassword&&v.errors.loginPassword,isInvalid:!!v.errors.loginPassword&&v.touched.loginPassword}),Object(x.jsx)(ae.a.Control.Feedback,{type:"invalid",children:v.errors.loginPassword})]}),Object(x.jsx)(V.a,{variant:"primary",children:"Use email:test@test.com password:123456 to login for testing or signup a new account"}),c&&Object(x.jsx)(V.a,{variant:"danger",children:c}),Object(x.jsxs)(b.a,{variant:"primary",type:"submit",children:[a&&Object(x.jsx)(R.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]}),Object(x.jsx)("div",{className:ce.a.loginToSignup,onClick:function(){return p(!0)},children:"Don't have an account? Sign up here"})]})]}),j&&Object(x.jsxs)("div",{className:ce.a.login,children:[Object(x.jsx)("div",{className:ce.a.loginTitle,children:"Sign Up"}),Object(x.jsxs)(ae.a,{onSubmit:f.handleSubmit,children:[Object(x.jsxs)(ae.a.Group,{controlId:"signupName",children:[Object(x.jsx)(ae.a.Label,{style:{color:"#999"},children:"Name"}),Object(x.jsx)(ae.a.Control,{name:"signupName",type:"text",placeholder:"Enter username",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.signupName,isValid:f.touched.signupName&&!f.errors.signupName,isInvalid:!!f.errors.signupName&&f.touched.signupName}),Object(x.jsx)(ae.a.Control.Feedback,{type:"invalid",children:f.errors.signupName})]}),Object(x.jsxs)(ae.a.Group,{controlId:"signupEmail",children:[Object(x.jsx)(ae.a.Label,{style:{color:"#999"},children:"Email address"}),Object(x.jsx)(ae.a.Control,{name:"signupEmail",type:"email",placeholder:"Enter email",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.signupEmail,isValid:f.touched.signupEmail&&!f.errors.signupEmail,isInvalid:!!f.errors.signupEmail&&f.touched.signupEmail}),Object(x.jsx)(ae.a.Control.Feedback,{type:"invalid",children:f.errors.signupEmail})]}),Object(x.jsxs)(ae.a.Group,{controlId:"signupPassword",children:[Object(x.jsx)(ae.a.Label,{style:{color:"#999"},children:"Password"}),Object(x.jsx)(ae.a.Control,{name:"signupPassword",type:"password",placeholder:"Password",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.signupPassword,isValid:f.touched.signupPassword&&!f.errors.signupPassword,isInvalid:!!f.errors.signupPassword&&f.touched.signupPassword}),Object(x.jsx)(ae.a.Control.Feedback,{type:"invalid",children:f.errors.signupPassword})]}),c&&Object(x.jsx)(V.a,{variant:"danger",children:c}),Object(x.jsxs)(b.a,{variant:"primary",type:"submit",children:[a&&Object(x.jsx)(R.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]}),Object(x.jsx)("div",{className:ce.a.loginToSignup,onClick:function(){return p(!1)},children:"Have an account? Login here"})]})]})]})})},ie=t(128),le=t.n(ie),ue=function(){var e=W(),r=e.isLoading,t=(e.error,e.sendRequest),n=e.clearError,a=Object(l.g)(),c=Object(o.useContext)(g),s=/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,i=/^[1-9]$|^[1-9][0-9]$|^(100)$/,u=function(){var e=Object(k.a)(y.a.mark((function e(r){var o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("setupHandler",r.yearNum,r.dateBirth),o={yearJournal:[],quarterJournal:[],weekJournal:[],expectedYears:r.yearNum,birthday:r.dateBirth},e.prev=2,e.next=5,t("users/setup","POST",JSON.stringify({weekObj:o}),{"Content-Type":"application/json",Authorization:"Bearer "+c.token});case 5:s=e.sent,console.log(s.userId),a.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),setTimeout((function(){n()}),5e3);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(r){return e.apply(this,arguments)}}(),d=Object(te.a)({initialValues:{yearNum:"",dateBirth:""},validate:function(e){var r={};return e.yearNum?i.test(e.yearNum)||(r.yearNum="Must be integer between 0-100"):r.yearNum="Required",e.dateBirth?s.test(e.dateBirth)||(r.dateBirth="Invalid date of birth, Please use YYYY-MM-DD"):r.dateBirth="Required",r},onSubmit:u});return Object(x.jsx)("div",{className:le.a.setupFormWrapper,children:Object(x.jsxs)(ae.a,{onSubmit:d.handleSubmit,children:[Object(x.jsxs)(ae.a.Group,{controlId:"yearNum",children:[Object(x.jsx)(ae.a.Label,{style:{color:"#999"},children:"How many years to include"}),Object(x.jsx)(ae.a.Control,{name:"yearNum",type:"text",placeholder:"Enter number of Years",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.yearNum,isValid:d.touched.yearNum&&!d.errors.yearNum,isInvalid:!!d.errors.yearNum}),Object(x.jsx)(ae.a.Control.Feedback,{type:"invalid",children:d.errors.yearNum})]}),Object(x.jsxs)(ae.a.Group,{controlId:"dateBirth",children:[Object(x.jsx)(ae.a.Label,{style:{color:"#999"},children:"Your birthday"}),Object(x.jsx)(ae.a.Control,{name:"dateBirth",type:"text",placeholder:"Enter your date of birth, YYYY-MM-DD",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.dateBirth,isValid:d.touched.dateBirth&&!d.errors.dateBirth,isInvalid:!!d.errors.dateBirth}),Object(x.jsx)(ae.a.Control.Feedback,{type:"invalid",children:d.errors.dateBirth})]}),Object(x.jsxs)(b.a,{variant:"primary",type:"submit",children:[r&&Object(x.jsx)(R.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]})]})})},de=t(80),je=t.n(de),be=function(){return Object(x.jsx)("div",{className:je.a.pageWrapper,children:Object(x.jsxs)("div",{className:je.a.contentWrapper,children:[Object(x.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:"Under Construction"}),Object(x.jsx)("div",{style:{color:"#666",marginBottom:"20px"},children:"Try github"}),Object(x.jsx)("a",{href:"https://github.com/Anting-Chang/weeko-meter",children:Object(x.jsx)(p.a,{className:je.a.github})})]})})},pe=t(81),he=t.n(pe),ge=t(50),Oe=t.n(ge),me=function(e){var r=Object(o.useState)(),t=Object(h.a)(r,2),n=t[0],a=t[1],c=Object(o.useState)(3),s=Object(h.a)(c,2),i=s[0],l=s[1],u=Object(o.useState)(),d=Object(h.a)(u,2),j=d[0],b=d[1];Object(o.useEffect)((function(){console.log(e.colorList),b(e.colorList)}),[e.colorList]),Object(o.useEffect)((function(){j&&j.length>0&&a(j[3])}),[j]),Object(o.useEffect)((function(){e.onChooseColor(3)}),[]);var p=function(r){a(j[r]),l(r),e.onChooseColor(r)};return Object(x.jsx)("div",{children:j&&Object(x.jsxs)("div",{className:Oe.a.btnWrapper,children:[Object(x.jsx)("div",{onClick:function(){return p(0)},className:Oe.a.btnBase,style:{backgroundColor:0===i?"".concat(n):""},children:j[0]}),Object(x.jsx)("div",{onClick:function(){return p(1)},className:Oe.a.btnBase,style:{backgroundColor:1===i?"".concat(n):""},children:j[1]}),Object(x.jsx)("div",{onClick:function(){return p(2)},className:Oe.a.btnBase,style:{backgroundColor:2===i?"".concat(n):""},children:j[2]}),Object(x.jsx)("div",{onClick:function(){return p(3)},className:Oe.a.btnBase,style:{backgroundColor:3===i?"".concat(n):""},children:j[3]})]})})},xe=function(e){var r=Object(l.h)(),t=r.yearNum,n=r.quarter,a=r.weekNum,c=r.jid,s=r.mode,i=Object(o.useContext)(g),u=Object(l.g)(),d=W(),j=d.isLoading,p=d.error,O=d.sendRequest,m=d.clearError,f=Object(U.b)(Z),v=Object(o.useState)(),w=Object(h.a)(v,2),C=w[0],N=w[1],S=Object(o.useState)(),_=Object(h.a)(S,2),q=_[0],T=_[1],B=Object(o.useState)(!0),E=Object(h.a)(B,2),I=E[0],D=E[1];Object(o.useEffect)((function(){switch(0!=c&&D(!1),setTimeout((function(){console.log(f)}),1e3),function(){var e=Object(k.a)(y.a.mark((function e(){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==c){e.next=13;break}return e.prev=1,e.next=4,O("content/getJournalById","POST",JSON.stringify({jid:c}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 4:return r=e.sent,e.next=7,P.setFieldValue("journal",r.journal.journal);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){m()}),5e3);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()(),s){case"week":N("Weekly Journal");break;case"quarter":N("Quarterly Journal");break;case"year":N("Yearly Journal")}console.log(t,n,a,c,s)}),[]);var J=function(){var e=Object(k.a)(y.a.mark((function e(r){var o,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(r.journal),!I){e.next=16;break}return e.prev=2,e.next=5,O("content/postJournal","POST",JSON.stringify({journal:r.journal,yearNum:t,quarter:n,weekNum:a,mode:s,color:q}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 5:o=e.sent,u.push("/"),console.log(o),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),setTimeout((function(){m()}),5e3);case 14:e.next=28;break;case 16:return e.prev=16,e.next=19,O("content/updateJournal","PATCH",JSON.stringify({jid:c,journal:r.journal}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 19:l=e.sent,u.push("/"),console.log(l),e.next=28;break;case 24:e.prev=24,e.t1=e.catch(16),console.log(e.t1),setTimeout((function(){m()}),5e3);case 28:case"end":return e.stop()}}),e,null,[[2,10],[16,24]])})));return function(r){return e.apply(this,arguments)}}(),L=function(e){T(e),console.log("color value",e)},P=Object(te.a)({initialValues:{journal:""},validationSchema:ne.a({journal:ne.b().max(2e3).required("Required")}),onSubmit:J});return Object(x.jsx)("div",{className:he.a.pageWrapper,children:Object(x.jsxs)("div",{className:he.a.formWrapper,children:[Object(x.jsx)("div",{className:he.a.formTitle,children:C}),Object(x.jsxs)(ae.a,{onSubmit:P.handleSubmit,children:[Object(x.jsxs)(ae.a.Group,{controlId:"journal",children:[Object(x.jsx)(ae.a.Control,{as:"textarea",name:"journal",type:"textarea",placeholder:"Enter journal",onChange:P.handleChange,onBlur:P.handleBlur,value:P.values.journal,isValid:P.touched.journal&&!P.errors.journal,isInvalid:!!P.errors.journal},"journal"),Object(x.jsx)(ae.a.Control.Feedback,{type:"invalid",children:P.errors.journal})]}),I&&"week"===s&&Object(x.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(x.jsx)("div",{style:{fontSize:"1rem",color:"#666"},children:"Choose a cube color"}),Object(x.jsx)(me,{colorList:f.weekColor,onChooseColor:L})]}),I&&"quarter"===s&&Object(x.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(x.jsx)("div",{style:{fontSize:"1rem",color:"#666"},children:"Choose a cube color"}),Object(x.jsx)(me,{colorList:f.quarterColor,onChooseColor:L})]}),I&&"year"===s&&Object(x.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(x.jsx)("div",{style:{fontSize:"1rem",color:"#666"},children:"Choose a cube color"}),Object(x.jsx)(me,{colorList:f.yearColor,onChooseColor:L})]}),p&&Object(x.jsx)(V.a,{variant:"danger",children:p}),Object(x.jsxs)(b.a,{variant:"primary",type:"submit",children:[j&&Object(x.jsx)(R.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Submit"]})]})]})})};var fe=function(){var e,r=function(){console.log("app is rerendering");var e=Object(o.useState)(!1),r=Object(h.a)(e,2),t=r[0],a=r[1],c=Object(o.useState)(),s=Object(h.a)(c,2),i=s[0],l=s[1],u=Object(o.useState)(),d=Object(h.a)(u,2),j=d[0],b=d[1],p=Object(o.useCallback)((function(e,r,t){console.log(e),b(e),a(r);var n=t||new Date((new Date).getTime()+36e5);l(n),localStorage.setItem("userData",JSON.stringify({userId:e,token:r,expiration:n.toISOString()}))}),[]),g=Object(o.useCallback)((function(){a(t),l(null),b(null),localStorage.removeItem("userData")}),[]);return Object(o.useEffect)((function(){if(console.log("timeout reached"),t&&i){var e=i.getTime()-(new Date).getTime();n=setTimeout(g,e)}else clearTimeout(n)}),[t,g,i]),Object(o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&p(e.userId,e.token)}),[p]),{token:t,login:p,logout:g,userId:j}}(),t=r.token,a=r.logout,c=r.login,s=r.userId;return Object(o.useContext)(g),e=t?Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{path:"/",exact:!0,children:Object(x.jsx)(re,{})}),Object(x.jsx)(l.b,{path:"/login",exact:!0,children:Object(x.jsx)(se,{})}),Object(x.jsx)(l.b,{path:"/setup",exact:!0,children:Object(x.jsx)(ue,{})}),Object(x.jsx)(l.b,{path:"/add-journal/:yearNum/:quarter/:weekNum/:jid/:mode",exact:!0,children:Object(x.jsx)(xe,{})}),Object(x.jsx)(l.b,{path:"/about",children:Object(x.jsx)(be,{})}),Object(x.jsx)(l.a,{to:"/"})]}):Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{path:"/login",children:Object(x.jsx)(se,{})}),Object(x.jsx)(l.b,{path:"/about",children:Object(x.jsx)(be,{})}),Object(x.jsx)(l.a,{to:"/login"})]}),Object(x.jsx)(g.Provider,{value:{isLoggedIn:!!t,token:t,userId:s,login:c,logout:a},children:Object(x.jsxs)(u.a,{basename:"/weeko-meter",children:[Object(x.jsx)(f,{}),e]})})},ve=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,247)).then((function(r){var t=r.getCLS,n=r.getFID,a=r.getFCP,o=r.getLCP,c=r.getTTFB;t(e),n(e),a(e),o(e),c(e)}))},ye=Object($.a)({reducer:{color:ee}});i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(U.a,{store:ye,children:Object(x.jsx)(fe,{})})}),document.getElementById("root")),ve()},50:function(e,r,t){e.exports={btnBase:"ColorChoosingButton_btnBase__3iVB1",btnWrapper:"ColorChoosingButton_btnWrapper__lVwYI"}},77:function(e,r,t){e.exports={idNav:"MainNavigation_idNav__2kKGw",githubIcon:"MainNavigation_githubIcon__ajo9v"}},78:function(e,r,t){e.exports={weekCubeWrapper:"WeekSection_weekCubeWrapper__32Eda",weekCube:"WeekSection_weekCube__3Pxah",weekCubeInfo:"WeekSection_weekCubeInfo__1lAs-",weekCubeCard:"WeekSection_weekCubeCard__DPcbA"}},79:function(e,r,t){e.exports={yearWrapper:"Main_yearWrapper__2_i-g",yearWrapperHide:"Main_yearWrapperHide__3FvKx",yearWrapperShow:"Main_yearWrapperShow__3ozvC",loading:"Main_loading__3eJaj"}},80:function(e,r,t){e.exports={pageWrapper:"About_pageWrapper__1EgXA",contentWrapper:"About_contentWrapper__3zsvG",github:"About_github__2QES9"}},81:function(e,r,t){e.exports={pageWrapper:"AddJornal_pageWrapper__2c7C8",formWrapper:"AddJornal_formWrapper__q8XR6",formTitle:"AddJornal_formTitle__2ADVn"}},96:function(e,r,t){e.exports={quarterWrapper:"YearSection_quarterWrapper__-raIp",yearTextHidden:"YearSection_yearTextHidden__4U3QO"}}},[[242,1,2]]]);
//# sourceMappingURL=main.06080205.chunk.js.map